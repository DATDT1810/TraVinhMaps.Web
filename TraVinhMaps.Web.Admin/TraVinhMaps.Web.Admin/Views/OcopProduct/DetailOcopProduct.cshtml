@using TraVinhMaps.Web.Admin.Models.OcopProduct
@using TraVinhMaps.Web.Admin.Models.SellingLink
@using System.Globalization
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@inject IConfiguration Configuration
@model OcopProductResponse;
@{
    ViewData["Title"] = "DetailOcopProduct";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    var sellingLinks = ViewBag.SellingLinks as List<SellingLinkResponse>;
    var platformDetails = new Dictionary<string, (string cssClass, string iconClass, string platformType)>
    {
        { "Shopee", ("shopee", "fa fa-shopping-cart", "E-commerce Platform") },
        { "Facebook", ("facebook", "fa fa-facebook-square", "Social Media Platform") },
        { "Lazada", ("lazada", "fa fa-tags", "E-commerce Platform") },
        { "Tiki", ("tiki", "fa fa-bolt", "E-commerce Platform") },
        { "Website", ("website", "fa fa-globe", "Official Website") }
    };
}
<link rel="stylesheet" type="text/css" href="~/css/pages/ocop-detail.css">
<div class="page-body">
    <div class="container-fluid">
        <div class="page-title">
            <div class="row">
                <div class="col-6">
                    <h4>OCOP Product Details</h4>
                    @if (TempData["ErrorMessage"] != null)
                    {
                        <div id="alert-message" class="alert alert-danger">
                            @TempData["ErrorMessage"]
                        </div>
                    }

                    @if (TempData["SuccessMessage"] != null)
                    {
                        <div id="alert-message" class="alert alert-success">
                            @TempData["SuccessMessage"]
                        </div>
                    }
                </div>
                <div class="col-6">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a asp-controller="Home" asp-action="Index"><i class="fa fa-home"
                                    style="font-size: 20px;"></i></a>
                        </li>
                        <li class="breadcrumb-item"> <a asp-controller="OcopProduct" asp-action="Index">OCOP Product</a>
                        </li>
                        <li class="breadcrumb-item active">OCOP Product Details</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <!-- Container-fluid starts-->
  <div class="container-fluid">
        <div>
            <div class="row product-page-main p-0">
                <div class="col-xxl-4 col-md-6 box-col-12">
                    <div class="card">
                        <div class="card-body" style="height: 650px;">
                            <div class="product-slider owl-carousel owl-theme" id="sync1">
                                @if (Model.ProductImage != null && Model.ProductImage.Any())
                                {
                                    @foreach (var item in Model.ProductImage)
                                    {
                                        <div class="item" style="height: 400px;">
                                            <img src="@item" alt="image ocop product" style="width: 100%; height: 400px; object-fit: cover;" />
                                        </div>
                                    }
                                }
                                else
                                {
                                    <div class="item" style="height: 90px; width: 70px;">
                                        <img class="img-fluid" src="/assets/images/no-image.png" alt="no image available"
                                            style="width: 100%; height: 100%;" />
                                    </div>
                                }
                            </div>
                            <div class="owl-carousel owl-theme" id="sync2">
                                @if (Model.ProductImage != null && Model.ProductImage.Any())
                                {
                                    @foreach (var item in Model.ProductImage)
                                    {
                                        <div class="item position-relative" style="height: 90px; width: 70px;">
                                            <img src="@item" alt="image ocop product"
                                                style="width: 100%; height: 100%; object-fit: cover; display: block;">
                                            <form asp-controller="OcopProduct" asp-action="DeleteOcopProductImage"
                                                method="post">
                                                @Html.AntiForgeryToken()
                                                <input hidden name="id" value="@Model.Id" />
                                                <input hidden name="imageUrl" value="@item" />
                                                <button type="submit" class="Delete-button-image"
                                                    onclick="event.stopPropagation();">
                                                    &times;
                                                </button>
                                            </form>
                                        </div>
                                    }
                                }
                                else
                                {
                                    <div class="item" style="height: 90px; width: 70px;">
                                        <img class="img-fluid" src="/assets/images/no-image.png" alt="no image available"
                                            style="width: 100%; height: 100%;" />
                                    </div>
                                }
                            </div>
                            <div class="item add-image-box">
                                <form asp-controller="OcopProduct" asp-action="AddOcopProductImage" method="post"
                                    class="upload-placeholder" enctype="multipart/form-data">
                                    @Html.AntiForgeryToken()
                                    <input type="hidden" name="id" value="@Model.Id" />
                                    <div class="upload-placeholder">+</div>
                                    <input hidden type="file" name="imageFile" multiple onchange="this.form.submit()" />
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xxl-8 box-col-6 order-xxl-0 order-1">
                    <div class="card text-white bg-success p-1 text-start rounded-4">
                        <div class="card-body">
                        <h2 class="text-white">
                            <i class="fa fa-leaf"></i><span> @Model.ProductName</span>
                        </h2>
                        <p>High-quality OCOP product from the Mekong Delta</p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 d-flex">
                            <div class="card flex-fill">
                                <div class="card-body" style="min-height: 235px;">
                                    <div class="detail-item"><i class="fa fa-tag"></i> <strong>Reference Price:</strong> <span>@(decimal.Parse(Model.ProductPrice!.Replace("₫", "")).ToString("C0", new System.Globalization.CultureInfo("vi-VN")))</span></div>
                                    <div class="detail-item"><i class="fa fa-leaf"></i> <strong>OCOP Type:</strong> <span class="badge bg-success">@ViewBag.OcopTypeName</span></div>
                                    <div class="detail-item"><i class="fa fa-building"></i> <strong>Company:</strong> <span>@ViewBag.CompanyName</span></div>
                                    <div class="detail-item">
                                        <i class="fa fa-star"></i> <strong>OCOP Rating:</strong>
                                        <span>
                                            @{
                                                int starCount = (int)Math.Floor((double)Model.OcopPoint);
                                                for (int i = 0; i < starCount; i++) { <i class="fa fa-star font-warning" style="margin-right: 0;"></i> }
                                                for (int i = starCount; i < 5; i++) { <i class="fa fa-star" style="color: #ccc; margin-right: 0;"></i> }
                                            }
                                        </span>
                           
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 d-flex">
                            <div class="card flex-fill">
                                <div class="card-body" style="min-height: 235px;">
                                    <div class="detail-item"><i class="fa fa-calendar"></i> <strong>Year Released:</strong> <span>@Model.OcopYearRelease</span></div>
                                    <div class="detail-item"><i class="fa fa-check-circle"></i> <strong>Status:</strong> <span class="text-success" style="font-weight: bold;">● Active</span></div>
                                    <div class="detail-item"><i class="fa fa-clock-o"></i> <strong>Created At:</strong> <span>@Model.CreatedAt.ToLocalTime().ToString("dd/MM/yy, HH:mm")</span></div>
                                    <div class="detail-item"><i class="fa fa-refresh"></i> <strong>Updated At:</strong> <span class="txt-success">@(Model.UpdateAt.HasValue ? Model.UpdateAt.Value.ToLocalTime().ToString("dd/MM/yy, HH:mm") : "No updates yet")</span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="min-height: 250px;">
                        <div class="card-body">
                            <h5 class="card-title" style="font-weight: bold">Description</h5>
                            <hr>
                            <div class="text-justify">
                                @Html.Raw(Model.ProductDescription)
                            </div>
                        </div>
                    </div>
                    
                    <div class="m-t-15 d-flex justify-content-end btn-showcase" style="padding-bottom: 20px;">
                        <div class="d-inline p-0">
                            <a class="btn btn-back" asp-action="Index">
                                Back
                            </a>
                            <a class="btn btn-edit" asp-action="UpdateOcopProduct" asp-route-id="@Model.Id">
                                <i class="fa fa-pencil" aria-hidden="true"></i>Edit OCOP Product
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-xxl-12 box-col-12 order-xxl-0 order-1">
                    <div class="card">
                        <div class="card-body d-flex flex-column"
                            style="gap: 12px;">
                            <div class="d-flex align-items-center p-3 ps-0 mb-3" style="background-color: var(--bs-light); border-radius: 12px;">
                                <div class="me-3">
                                    <i class="fa fa-store"></i>
                                </div>
                                <div class="flex-grow-1">
                                    <h4 class="f-w-700 mb-0"><i class="fa fa-store" style="color: #6366f1;"></i>Selling Points of the Product</h4>
                                    <p class="mb-0" style="color: var(--bs-gray-600);">@Model.ProductName</p>
                                </div>
                                <div class="d-flex align-items-center gap-4 mx-5">
                                    <div class="text-center">
                                        <h3 class="f-w-700 mb-0" style="color: #6366f1;">@(Model.Sellocations?.Count ?? 0)</h3>
                                        <p class="text-secondary mb-0 text-uppercase" style="font-size: 0.8rem;">Selling Points</p>
                                    </div>
                                </div>
                                <div>
                                    <a class="btn btn-success" style="border-radius: 50px; padding: 10px 20px;"
                                        title="Create Point of Sell" data-bs-toggle="modal" data-bs-target="#addLocationModal">
                                        <i class="fa fa-plus"></i> Add Selling Point
                                    </a>
                                </div>
                            </div>

                            <div>
                                @if (Model.Sellocations == null || !Model.Sellocations.Any())
                                {
                                   <div class="d-flex justify-content-between align-items-center ps-3">
                                        <div>
                                            <b>No Location Name.</b><br />
                                            <span>No Location Address.</span>
                                        </div>
                                    </div>
                                }
                                else
                                {
                                    <div id="sellocation-list" class="row">
                                        @for (int i = 0; i < Model.Sellocations.Count; i++)
                                        {
                                            var item = Model.Sellocations[i];

                                            <div class="col-md-6 mb-4 d-flex">
                                                <div class="location-card">
                                                    <div class="d-flex justify-content-between align-items-center mb-2 flex-wrap" style="gap: 8px;">
                                                        <div>
                                                            <h3 style="margin: 0; font-weight: 600; max-width: 430px; min-height: 60px">
                                                                @(item?.LocationName ?? "No Location Name.")
                                                            </h3>
                                                            <div style="font-size: 0.9rem; max-width: 430px; min-height: 42px ; padding-top: 5px">
                                                                @(item?.LocationAddress ?? "No Location Address.")
                                                            </div>
                                                        </div>
                                                        <div class="d-flex" style="gap: 6px; padding-bottom : 50px">
                                                            <button type="button" title="Edit"
                                                                    style="background: none; border: none; padding: 4px; cursor: pointer; font-size: 14px; line-height: 1;"
                                                                    class="btn btn-success btn-sm px-2 py-1 edit-location-btn" data-bs-toggle="modal"
                                                                    data-bs-target="#editLocationModal" data-id="@Model.Id"
                                                                    data-name="@item.LocationName" data-address="@item.LocationAddress"
                                                                    data-marker="@item.MarkerId"
                                                                    data-type="@(item.Location?.Type ?? "Point")"
                                                                    data-longitude="@(item?.Location?.Longitude ?? 0)"
                                                                    data-latitude="@(item?.Location?.Latitude ?? 0)">
                                                                <i class="fa fa-pencil" aria-hidden="true"></i>
                                                            </button>

                                                            <button type="button" title="Delete"
                                                                    style="background: none; border: none; padding: 4px; cursor: pointer; font-size: 14px; line-height: 1;"
                                                                    class="delete-sell-location btn btn-danger btn-sm px-2 py-1" data-product-id="@Model.Id"
                                                                    data-location-name="@item.LocationName">
                                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="d-flex flex-wrap align-items-center mb-3" style="gap: 12px;">
                                                        <label
                                                            style="font-size: 0.8rem; min-width: 70px; margin: 0;">Longitude</label>
                                                        <input type="text" class="form-control" readonly
                                                               style="flex: 1; min-width: 150px; border-radius: 10px;"
                                                               value="@(item?.Location?.Longitude?.ToString("F6", CultureInfo.InvariantCulture) ?? "0")" />

                                                        <label
                                                            style="font-size: 0.8rem; min-width: 70px; margin: 0;">Latitude</label>
                                                        <input type="text" class="form-control" readonly
                                                               style="flex: 1; min-width: 150px; border-radius: 10px;"
                                                               value="@(item?.Location?.Latitude?.ToString("F6", CultureInfo.InvariantCulture) ?? "0")" />
                                                    </div>
                                                    <div class="map-wrapper">
                                                        <div class="here-map-container" id="map-container-@(i)"
                                                             style="height: 100%; width: 100%;"
                                                             data-latitude="@(item?.Location?.Latitude?.ToString("F6", CultureInfo.InvariantCulture) ?? "0")"
                                                             data-longitude="@(item?.Location?.Longitude?.ToString("F6", CultureInfo.InvariantCulture) ?? "0")">
                                                            <!-- The map will be initialized here by JavaScript -->
                                                        </div>
                                                        <div class="map-overlay edit-location-btn" title="Edit"
                                                             style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; cursor: pointer;"
                                                             data-bs-toggle="modal" data-bs-target="#editLocationModal"
                                                             data-id="@Model.Id" data-name="@item.LocationName"
                                                             data-address="@item.LocationAddress" data-marker="@item.MarkerId"
                                                             data-type="@(item.Location?.Type ?? "Point")"
                                                             data-longitude="@(item?.Location?.Longitude ?? 0)"
                                                             data-latitude="@(item?.Location?.Latitude ?? 0)">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    </div>
                                    <div class="pagination-container">
                                        <ul class="pagination" id="pagination">
                                        </ul>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <div class="col-sm-12" style="padding: 0px;">
                                <div class="tab-content" id="top-tabContent">
                            <div class="tab-pane fade active show" id="top-home" role="tabpanel"
                                aria-labelledby="top-home-tab">
                                <div class="mt-1">
                                    <div class="filter-block">
                                        <div class="sell d-flex justify-content-between align-items-center mb-3 p-3" style="background-color: var(--bs-light); border-radius: 12px;">
                                            <h5 class="fw-bold m-0"><i class="fa fa-link" style="color: #6366f1;"></i> Store of selling link</h5>
                                            <a class="btn btn-success" style="border-radius: 20px;"
                                                title="Create Point of Selling Link" data-bs-toggle="modal"
                                                data-bs-target="#addSellingLinkModal"><i class="fa fa-plus"></i> Add New Link</a>
                                        </div>

                                        @if (sellingLinks != null && sellingLinks.Any())
                                        {
                                            <div class="selling-link-summary">
                                                <div class="summary-item">
                                                    <h4>@sellingLinks.Count</h4>
                                                    <p>Total Links</p>
                                                </div>
                                                <div class="summary-item">
                                                    <h4>@sellingLinks.Count</h4>
                                                    <p>Active</p>
                                                </div>
                                                <div class="summary-item">
                                                    <h4>@sellingLinks.Select(l => l.Title).Distinct().Count()</h4>
                                                    <p>Platforms</p>
                                                </div>
                                            </div>
                                        }
                                        
                                        <div id="sellinglink-list"
                                            style="max-height: 400px; overflow-y: auto; padding: 5px;">
                                            @if (sellingLinks != null && sellingLinks.Any())
                                            {
                                                foreach (var item in sellingLinks)
                                                {
                                                    var (cssClass, iconClass, platformType) = platformDetails.GetValueOrDefault(item.Title, ("default", "fa fa-link", "Other Platform"));

                                                    <div class="selling-link-card @cssClass">
                                                        <div class="selling-link-header">
                                                            <div class="selling-link-info">
                                                                <div class="selling-link-icon @cssClass">
                                                                    <i class="@iconClass"></i>
                                                                </div>
                                                                <div class="selling-link-title">
                                                                    <h6>@item.Title</h6>
                                                                    <p>@platformType</p>
                                                                </div>
                                                            </div>
                                                            <div class="selling-link-actions">
                                                                <a href="@(item?.Link ?? "#")" target="_blank" class="btn btn-info" title="Go to link"><i class="fa fa-link"></i></a>
                                                                <button type="button" class="btn btn-warning edit-selling-link-btn" title="Edit" 
                                                                        data-bs-toggle="modal" data-bs-target="#editSellingLinkModal"
                                                                        data-product-id="@Model.Id" data-id="@item.Id"
                                                                        data-title="@item.Title" data-link="@item.Link">
                                                                    <i class="fa fa-pencil"></i>
                                                                </button>
                                                                <button type="button" class="btn btn-danger delete-selling-link" title="Delete Selling Link" 
                                                                        data-bs-toggle="modal" data-bs-target="#deleteSellingLinkModal"
                                                                        data-product-id="@Model.Id" data-id="@item.Id">
                                                                    <i class="fa fa-trash"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                        <div class="selling-link-body">
                                                            <p><i class="fa fa-globe"></i> SELLING LINK URL</p>
                                                            <a href="@(item?.Link ?? "#")" target="_blank">@item.Link</a>
                                                        </div>
                                                    </div>
                                                }
                                            }
                                            else
                                            {
                                                <div class="text-center p-5">
                                                    <p>No selling links available.</p>
                                                </div>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Container-fluid Ends-->
    </div>

@* create of sell location *@

    <div class="modal fade" id="addLocationModal" tabindex="-1" aria-labelledby="addLocationModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title text-success fw-bold" id="addLocationModalLabel">Add New Location</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="addLocationForm" method="post">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="Id" value="@Model.Id" />
                    <input type="hidden" name="MarkerId" value="68486609935049741c54a644" />
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-5">
                                <div class="mb-3">
                                    <label class="form-label">Name of Location</label>
                                    <input type="text" name="LocationName" id="locationNameAdd" class="form-control"
                                        placeholder="Enter location name" required />
                                    <span class="text-danger field-validation-valid" data-valmsg-for="LocationName"
                                        data-valmsg-replace="true"></span>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Address</label>
                                    <div style="position: relative;">
                                        <div class="input-group">
                                            <input type="text" name="LocationAddress" id="locationAddressAdd"
                                                class="form-control" placeholder="Enter address" required
                                                autocomplete="off" />
                                            <button class="btn btn-outline-secondary" type="button"
                                                id="searchAddressBtnAdd">Search</button>
                                        </div>
                                        <div id="addressSuggestionsAdd" class="list-group"
                                            style="position: absolute; z-index: 1056; width: 100%; max-height: 220px; overflow-y: auto;">
                                        </div>
                                    </div>
                                    <div id="addressWarningAdd" class="text-warning mt-1"></div>
                                    <span class="text-danger field-validation-valid" data-valmsg-for="LocationAddress"
                                        data-valmsg-replace="true"></span>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Location Type</label>
                                    <input type="text" name="Type" id="typeAdd" class="form-control" value="Point"
                                        readonly />
                                    <span class="text-danger field-validation-valid" data-valmsg-for="Type"
                                        data-valmsg-replace="true"></span>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Longitude</label>
                                    <input type="number" name="Longitude" id="longitudeAdd" class="form-control"
                                        step="any" placeholder="Enter longitude" required min="-180" max="180" />
                                    <span class="text-danger field-validation-valid" data-valmsg-for="Longitude"
                                        data-valmsg-replace="true"></span>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Latitude</label>
                                    <input type="number" name="Latitude" id="latitudeAdd" class="form-control"
                                        step="any" placeholder="Enter latitude" required min="-90" max="90" />
                                    <span class="text-danger field-validation-valid" data-valmsg-for="Latitude"
                                        data-valmsg-replace="true"></span>
                                </div>
                            </div>
                            <div class="col-md-7">
                                <div id="addMapContainer"
                                    style="width: 100%; height: 500px; border-radius: 8px; border: 1px solid #ddd;">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-success">Save Location</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

@* edit of sell location*@

    <div class="modal fade" id="editLocationModal" tabindex="-1" aria-labelledby="editLocationModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold text-success" id="editLocationModalLabel">Edit Location</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="editLocationForm" method="post">
                    @Html.AntiForgeryToken()
                    <input hidden name="Id" id="id" value="@Model.Id" />
                    <input hidden name="MarkerId" id="markerId" value="@ViewBag.MarkerId" />
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-5">
                                <div class="mb-3">
                                    <label class="form-label">Name of Location</label>
                                    <input type="text" name="LocationName" id="locationName" class="form-control"
                                        placeholder="Enter location name" required readonly />
                                    <div class="readonly-note">*Not editable</div>
                                    <span class="text-danger field-validation-valid" data-valmsg-for="LocationName"
                                        data-valmsg-replace="true"></span>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Address</label>
                                    <div style="position: relative;">
                                        <div class="input-group">
                                            <input type="text" name="LocationAddress" id="locationAddress"
                                                class="form-control" placeholder="Enter address" required
                                                autocomplete="off" />
                                            <button class="btn btn-outline-secondary" type="button"
                                                id="searchAddressBtn">Search</button>
                                        </div>
                                        <div id="addressSuggestions" class="list-group"
                                            style="position: absolute; z-index: 1056; width: 100%; max-height: 220px; overflow-y: auto;">
                                        </div>
                                    </div>
                                    <div id="addressWarningEdit" class="text-warning mt-1"></div>
                                    <span class="text-danger field-validation-valid" data-valmsg-for="LocationAddress"
                                        data-valmsg-replace="true"></span>
                                </div>
                                <div class="mb-3" hidden>
                                    <label class="form-label">Location Type</label>
                                    <input type="text" name="Type" id="type" class="form-control" value="Point"
                                        readonly />
                                    <span class="text-danger field-validation-valid" data-valmsg-for="Type"
                                        data-valmsg-replace="true"></span>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Longitude</label>
                                    <input type="number" name="Longitude" id="longitude" class="form-control" step="any"
                                        placeholder="Enter longitude" required min="-180" max="180" readonly />
                                    <span class="text-danger field-validation-valid" data-valmsg-for="Longitude"
                                        data-valmsg-replace="true"></span>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Latitude</label>
                                    <input type="number" name="Latitude" id="latitude" class="form-control" step="any"
                                        placeholder="Enter latitude" required min="-90" max="90" readonly />
                                    <span class="text-danger field-validation-valid" data-valmsg-for="Latitude"
                                        data-valmsg-replace="true"></span>
                                </div>
                            </div>
                            <div class="col-md-7">
                                <div id="editMapContainer"
                                    style="width: 100%; height: 500px; border-radius: 8px; border: 1px solid #ddd;">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-success">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

@* create of selling link *@

    <div class="modal fade" id="addSellingLinkModal" tabindex="-1" aria-labelledby="addSellingLinkModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addSellingLinkLabel">Add New Selling Link</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="addSellingLinkForm" method="post">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="ProductId" value="@Model.Id" />
                    <div class="modal-body">
                        <div class="mb-3">
                            <label class="form-label">Title Of Selling Link</label>
                            <select name="Title" id="titleAdd" class="form-select" required>
                                <option value="">-- Select a title --</option>
                                <option value="Facebook">Facebook</option>
                                <option value="Shopee">Shopee</option>
                                <option value="Lazada">Lazada</option>
                                <option value="Tiki">Tiki</option>
                                <option value="Website">Website</option>
                            </select>
                            <span class="text-danger field-validation-valid" data-valmsg-for="Title"
                                data-valmsg-replace="true"></span>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Name Of Selling Link</label>
                            <input type="text" name="Link" id="linkAdd" class="form-control" placeholder="Enter"
                                required />
                            <span class="text-danger field-validation-valid" data-valmsg-for="Link"
                                data-valmsg-replace="true"></span>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save Link</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
@* edit of selling link*@

    <div class="modal fade" id="editSellingLinkModal" tabindex="-1" aria-labelledby="editSellingLinkModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editSellingLinkModalLabel">Edit Selling Link</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="editSellingLinkForm" method="post">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="ProductId" id="productIdEdit" value="@Model.Id" />
                    <input type="hidden" name="Id" id="idEdit" />
                    <div class="modal-body">
                        <div class="mb-3">
                            <label class="form-label">Title Of Selling Link</label>
                            <select name="Title" id="titleEdit" class="form-select" required>
                                <option value="">-- Select a title --</option>
                                <option value="Facebook">Facebook</option>
                                <option value="Shopee">Shopee</option>
                                <option value="Lazada">Lazada</option>
                                <option value="Tiki">Tiki</option>
                                <option value="Website">Website</option>
                            </select>
                            <span class="text-danger field-validation-valid" data-valmsg-for="Title"
                                data-valmsg-replace="true"></span>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Name Of Selling Link</label>
                            <input type="text" name="Link" id="linkEdit" class="form-control" placeholder="Enter"
                                required />
                            <span class="text-danger field-validation-valid" data-valmsg-for="Link"
                                data-valmsg-replace="true"></span>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

@section Scripts {
    @Html.AntiForgeryToken()
        <script src="~/assets/js/ocopproduct/formModal.js"></script>
        <script src="~/assets/js/ocopproduct/crud.js"></script>
        <script src="~/assets/js/sweetalert-custom.js"></script>

        <!-- HERE Maps API Scripts -->
        <script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-core.js"></script>
        <script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-service.js"></script>
        <script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-ui.js"></script>
        <script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-mapevents.js"></script>
        <link rel="stylesheet" type="text/css" href="https://js.api.here.com/v3/3.1/mapsjs-ui.css" />

        <script>
            // Pass the API key from configuration to a global JavaScript variable
            window.HERE_API_KEY = '@Configuration["HEREMAP_API_KEY"]';
        </script>

        <script src="~/assets/js/ocopproduct/heremap-loader.js"></script>
        <script src="~/assets/js/ocopproduct/edit-location-map.js"></script>

        <script>
            (function () {
                const success = @Html.Raw(Json.Serialize(TempData["Success"]));
                const error = @Html.Raw(Json.Serialize(TempData["Error"]));
                if (success) showSuccessAlert("Success!", success);
                if (error) showErrorAlert("Error!", error);
            })();
            document.querySelector('.upload-placeholder').addEventListener('click', function () {
                document.querySelector('input[name="imageFile"]').click();
            });

            // Pagination logic
            const itemsPerPage = 2;
            const sellocationList = document.getElementById('sellocation-list');
            const paginationContainer = document.getElementById('pagination');
            const items = Array.from(sellocationList.getElementsByClassName('col-md-6'));
            const pageCount = Math.ceil(items.length / itemsPerPage);

            function showPage(page) {
                const start = (page - 1) * itemsPerPage;
                const end = start + itemsPerPage;

                items.forEach((item, index) => {
                    if (index >= start && index < end) {
                        item.classList.remove('d-none');
                    } else {
                        item.classList.add('d-none');
                    }
                });

                updatePaginationUI(page);
            }

            function updatePaginationUI(currentPage) {
                paginationContainer.innerHTML = '';

                for (let i = 1; i <= pageCount; i++) {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.href = '#';
                    a.innerText = i;
                    if (i === currentPage) {
                        a.classList.add('active');
                    }
                    a.addEventListener('click', (e) => {
                        e.preventDefault();
                        showPage(i);
                    });
                    li.appendChild(a);
                    paginationContainer.appendChild(li);
                }
            }

            if (items.length > 0) {
                showPage(1);
            }


            setTimeout(function () {
                var alert = document.getElementById("alert-message");
                if (alert) {
                    alert.style.display = "none";
                }
            }, 1000);
        </script>
}
